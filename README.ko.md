# `@naverpay/pite`

`@naverpay/pite`λ” **λΌμ΄λΈλ¬λ¦¬ κ°λ°μ„ μ„ν• Vite λ²λ“¤λ¬ μ„¤μ • ν¨ν‚¤μ§€**μ…λ‹λ‹¤.  
`Vite`μ™€ `Rollup`μ„ κΈ°λ°μΌλ΅ ν•μ—¬ ν¨μ¨μ μΈ λ²λ“¤λ§μ„ μ κ³µν•λ©°,  
**ESM(`.mjs`) λ° CJS(`.js`) λ¨λ“ ν¬λ§·μ„ μ§€μ›**ν•κ³ ,  
**μ™Έλ¶€ μμ΅΄μ„± μλ™ κ°μ§€ λ° ν΄λ¦¬ν•„ κ΄€λ¦¬ κΈ°λ¥**μ„ μ κ³µν•©λ‹λ‹¤.

## π€ μ£Όμ” κΈ°λ¥

- π“¦ **λ‹¤μ¤‘ λ¨λ“ ν¬λ§· μ§€μ›**: `ESM`(`.mjs`), `CJS`(`.js`) μ¶λ ¥ μ§€μ›
- β΅ **λΌμ΄λΈλ¬λ¦¬ κ°λ° μµμ ν™”**: `Vite`μ™€ `Rollup`μ„ ν™μ©ν• λ²λ“¤λ§
- π― **νƒ€κ² λΈλΌμ°μ € μ„¤μ • κ°€λ¥**: `browserslist`λ¥Ό μ‚¬μ©ν• ES λΉλ“ νƒ€κ² μ§€μ •
- π”„ **μλ™ ν΄λ¦¬ν•„ μ£Όμ…**: `core-js` κΈ°λ°μ ν΄λ¦¬ν•„μ„ μλ™μΌλ΅ μ‚½μ…
- π”§ **μ μ—°ν• μ„¤μ • μ§€μ›**: λΉλ“ μµμ… λ° μ™Έλ¶€ μμ΅΄μ„±μ„ μ‰½κ² μ„¤μ • κ°€λ¥
- π— **λ¨λ“ κµ¬μ΅° μ μ§€**: `preserveModules` κΈ°λ¥μ„ μ μ§€ν•μ—¬ νΈλ¦¬ μ…°μ΄ν‚Ή(Tree Shaking) μµμ ν™”

## π“¥ μ„¤μΉ

μ•„λ λ…λ Ήμ–΄λ¥Ό μ‹¤ν–‰ν•μ—¬ κ°λ° μμ΅΄μ„±μΌλ΅ μ„¤μΉν•μ„Έμ”.

```sh
npm install --save-dev @naverpay/pite
```

λλ” `pnpm`μ„ μ‚¬μ©ν•  κ²½μ°:

```sh
pnpm add -D @naverpay/pite
```

## π“ μ‚¬μ©λ²•

### 1οΈβƒ£ Vite μ„¤μ • νμΌ μƒμ„±

`vite.config.ts` νμΌμ—μ„ `createViteConfig`λ¥Ό λ¶λ¬μ™€ μ„¤μ •ν•©λ‹λ‹¤.

```ts
import { createViteConfig } from '@naverpay/pite'

export default createViteConfig({
    cwd: process.cwd(), // ν„μ¬ μ‘μ—… λ””λ ‰ν† λ¦¬
    entry: ['src/index.ts'], // μ—”νΈλ¦¬ νμΌ
    outputs: [
        { format: 'es', dist: 'dist/es' }, // ES λ¨λ“ μ¶λ ¥ κ²½λ΅
        { format: 'cjs', dist: 'dist/cjs' }, // CJS λ¨λ“ μ¶λ ¥ κ²½λ΅
    ],
    cssFileName: 'style.css', // CSS νμΌ μ¶λ ¥ μ΄λ¦„
    allowedPolyfills: ['fetch', 'Promise'], // ν—μ©ν•  ν΄λ¦¬ν•„ λ©λ΅
    ignoredPolyfills: ['Symbol'], // μ μ™Έν•  ν΄λ¦¬ν•„ λ©λ΅
    options: {
        minify: true, // μ½”λ“ μ••μ¶• μ—¬λ¶€
        sourcemap: true, // μ†μ¤λ§µ μƒμ„± μ—¬λ¶€
    },
})
```

### 2οΈβƒ£ λΌμ΄λΈλ¬λ¦¬ λΉλ“ μ‹¤ν–‰

μ•„λ λ…λ Ήμ–΄λ¥Ό μ‹¤ν–‰ν•μ—¬ λΌμ΄λΈλ¬λ¦¬λ¥Ό λ²λ“¤λ§ν•  μ μμµλ‹λ‹¤.

```sh
vite build
```

λΉλ“κ°€ μ™„λ£λλ©΄, `dist/es`, `dist/cjs` λ””λ ‰ν† λ¦¬μ— λ²λ“¤λ νμΌμ΄ μƒμ„±λ©λ‹λ‹¤.

---

## β™οΈ μ„¤μ • μµμ…

| μµμ…λ…                | νƒ€μ…                           | μ„¤λ… |
|----------------------|----------------------------|-------------|
| `cwd`               | `string`                    | ν„μ¬ μ‘μ—… λ””λ ‰ν† λ¦¬ (κΈ°λ³Έκ°’: `'.'`) |
| `entry`             | `string[]`                  | μ—”νΈλ¦¬ νμΌ κ²½λ΅ |
| `outputs`           | `{format: 'es' \| 'cjs'; dist: string}[]` | μ¶λ ¥ν•  λ¨λ“ ν¬λ§· λ° λ””λ ‰ν† λ¦¬ μ§€μ • |
| `cssFileName`       | `string`                    | μ¶λ ¥λ  CSS νμΌ μ΄λ¦„ |
| `allowedPolyfills`  | `string[]`                  | ν—μ©ν•  ν΄λ¦¬ν•„ λ©λ΅ |
| `ignoredPolyfills`  | `string[]`                  | μ μ™Έν•  ν΄λ¦¬ν•„ λ©λ΅ |
| `options`           | `BuildOptions`              | μ¶”κ°€μ μΈ Vite λΉλ“ μµμ… |

---

## π“¦ μ™Έλ¶€ μμ΅΄μ„± μ²λ¦¬

`createViteConfig`λ” μλ™μΌλ΅ `package.json`μ μμ΅΄μ„±μ„ κ°μ§€ν•μ—¬ λ²λ“¤μ—μ„ μ μ™Έν•©λ‹λ‹¤.  
ν•„μ”ν•  κ²½μ°, νΉμ • μμ΅΄μ„±μ„ μλ™μΌλ΅ μ¶”κ°€ν•  μλ„ μμµλ‹λ‹¤.

---

## π”„ ν΄λ¦¬ν•„ κ΄€λ¦¬

`@naverpay/pite`λ” `babel-plugin-polyfill-corejs3`μ„ μ‚¬μ©ν•μ—¬  
**ν•„μ”ν• ν΄λ¦¬ν•„λ§ ν¬ν•¨ν•λ„λ΅ μµμ ν™”**ν•©λ‹λ‹¤.  
μ΄λ¥Ό ν†µν•΄ λ¶ν•„μ”ν• μ½”λ“ μ¦κ°€λ¥Ό λ°©μ§€ν•κ³ , μµμ μ λΈλΌμ°μ € νΈν™μ„±μ„ μ μ§€ν•  μ μμµλ‹λ‹¤.

---

## π“ λΌμ΄μ„ μ¤

MIT License Β© 2025 NaverPay
